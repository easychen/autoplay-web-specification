# 浏览器录制工具和自播放网页规范

- 规范编号 BROWSER-REC
- 规范编号 BROWSER-REC-AUTO-WEB

## 什么是浏览器录制工具

录屏工具可以录制电脑屏幕，浏览器录制工具则录制浏览器。录制浏览器的意义在于，可以用过纯粹的 Web 技术来组织内容。

## 什么是自播放网页
录制静态网页没有意义，但我们可以通过 JavaScript 让网页可以在访问时自动的、按时间顺序显示不同的内容。这一类网页，我们称其为「自播放网页」。

## 「浏览器录制工具」和「自播放网页」的交互

为了让网页内容和录制操作可以同步，我们需要在「网页」和「录制工具」之间进行交互。至少需要一个单向通知机制。

一个常见的实现是在「浏览器录制工具」启动一个 http 服务，监听请求响应控制。

![](pic1.png)

本规范描述了一个简单的交互接口，以方便遵守规范的网页可以被更多的录制工具兼容。

## 规范内容

### 协议
提供一个 http 协议接受请求

### 接口

#### /start 

- 接口描述：开始录制
- 参数：没有参数
- 方法：GET 和 POST
- 成功返回：{"message":"done"，"task_id":""} task_id 为可选
- 错误返回：{"code":"错误编号","error":"错误信息"}
- 备注：为方便调用，此接口需支持 CORS 调用

#### /stop

- 接口描述：停止录制
- 参数：task_id（可选）
- 方法：GET 和 POST
- 成功返回：{"message":"done"}
- 错误返回：{"code":"错误编号","error":"错误信息"}
- 备注：为方便调用，此接口需支持 CORS 调用

#### /detail - 可选

- 接口描述：查看录制任务状态
- 参数：task_id（可选）
- 方法：GET 和 POST
- 成功返回：{"message":{"录制任务状态对象"}}
- 错误返回：{"code":"错误编号","error":"错误信息"}
- 备注：为方便调用，此接口需支持 CORS 调用

### 其他说明

如果「浏览器录制工具」包含浏览器，那么除了从外部访问 http 接口，被录制的网页本身也可以访问到这个接口。这使得网页可以主动控制录制操作。

![](pic2.png)

比如，当内容加载完成后，可以通过 JavaScript 调用 /start 端口；当内容播放完后，可以通过 Javascript 调用 /stop 端口结束录制。

通过以上接口控制录制操作的自播放网页，被认为遵守 BROWSER-REC-AUTO-WEB 规范。

